<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.2.0',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    translation: {
      copy_button: 'Kopieren',
      copy_success: 'Kopiert',
      copy_failure: 'Kopieren fehlgeschlagen'
    }
  };
</script>



  <meta name="description" content="code paper æ‘˜è¦:ç›®å‰ç›®æ ‡æ£€æµ‹ç²¾åº¦æœ€é«˜çš„æ˜¯RCNNå¼•å¯¼çš„ä¸¤é˜¶æ®µçš„æ–¹æ³•ï¼Œç›¸åï¼Œä¸€é˜¶æ®µçš„æ–¹æ³•æ›´å¿«æ›´ç®€å•ï¼Œä½†æ˜¯ç²¾åº¦è½åå¾ˆå¤š.   æˆ‘ä»¬å‘ç°è¿™ç§æ ¹æœ¬åŸå› æ˜¯å› ä¸ºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ­£è´Ÿæ ·æœ¬ä¸å‡è¡¡ã€‚æœ¬æ–‡æå‡ºäº†æ”¹å˜æ ‡å‡†äº¤å‰ç†µæŸå¤±ï¼šé™ä½æ˜“åˆ†æ ·æœ¬çš„æŸå¤±æƒé‡çš„æ–¹æ³•æ¥è§£å†³è¿™ç§ç±»åˆ«ä¸å¹³è¡¡æ–¹æ³•ã€‚ä¸ºäº†æ£€éªŒæ–¹æ³•çš„æœ‰æ•ˆæ€§ï¼Œè¿˜æå‡ºäº†ä¸€ä¸ªRetinaNet,é€Ÿåº¦å¯ä»¥å’Œä¸€é˜¶æ®µçš„æ£€æµ‹å™¨ç›¸åª²ç¾è€Œä¸”æ£€æµ‹ç²¾åº¦ä¹Ÿå¾ˆé«˜ã€‚ å¤„ç†æ ·æœ¬ä¸å‡è¡¡çš„å¸¸ç”¨æ–¹">
<meta name="keywords" content="ObjectDetection">
<meta property="og:type" content="article">
<meta property="og:title" content="focal_loss">
<meta property="og:url" content="http://yoursite.com/2018/05/01/focal-loss/index.html">
<meta property="og:site_name" content="å‹äººå¸">
<meta property="og:description" content="code paper æ‘˜è¦:ç›®å‰ç›®æ ‡æ£€æµ‹ç²¾åº¦æœ€é«˜çš„æ˜¯RCNNå¼•å¯¼çš„ä¸¤é˜¶æ®µçš„æ–¹æ³•ï¼Œç›¸åï¼Œä¸€é˜¶æ®µçš„æ–¹æ³•æ›´å¿«æ›´ç®€å•ï¼Œä½†æ˜¯ç²¾åº¦è½åå¾ˆå¤š.   æˆ‘ä»¬å‘ç°è¿™ç§æ ¹æœ¬åŸå› æ˜¯å› ä¸ºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ­£è´Ÿæ ·æœ¬ä¸å‡è¡¡ã€‚æœ¬æ–‡æå‡ºäº†æ”¹å˜æ ‡å‡†äº¤å‰ç†µæŸå¤±ï¼šé™ä½æ˜“åˆ†æ ·æœ¬çš„æŸå¤±æƒé‡çš„æ–¹æ³•æ¥è§£å†³è¿™ç§ç±»åˆ«ä¸å¹³è¡¡æ–¹æ³•ã€‚ä¸ºäº†æ£€éªŒæ–¹æ³•çš„æœ‰æ•ˆæ€§ï¼Œè¿˜æå‡ºäº†ä¸€ä¸ªRetinaNet,é€Ÿåº¦å¯ä»¥å’Œä¸€é˜¶æ®µçš„æ£€æµ‹å™¨ç›¸åª²ç¾è€Œä¸”æ£€æµ‹ç²¾åº¦ä¹Ÿå¾ˆé«˜ã€‚ å¤„ç†æ ·æœ¬ä¸å‡è¡¡çš„å¸¸ç”¨æ–¹">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/2018/05/01/focal-loss/%5Cimages%5CFocalLoss%5C1.png">
<meta property="og:image" content="http://yoursite.com/2018/05/01/focal-loss/%5Cimages%5CFocalLoss%5C2.png">
<meta property="og:image" content="http://yoursite.com/2018/05/01/focal-loss/%5Cimages%5CFocalLoss%5C3.png">
<meta property="og:image" content="http://yoursite.com/2018/05/01/focal-loss/%5Cimages%5CFocalLoss%5C%E5%9B%BE%E7%89%871.jpg">
<meta property="og:image" content="http://yoursite.com/2018/05/01/focal-loss/%5Cimages%5CFocalLoss%5Cfocal_loss7.jpg">
<meta property="og:image" content="http://yoursite.com/2018/05/01/focal-loss/%5Cimages%5CFocalLoss%5C4.png">
<meta property="og:image" content="http://yoursite.com/2018/05/01/focal-loss/%5Cimages%5CFocalLoss%5C5.png">
<meta property="og:updated_time" content="2019-07-14T07:17:33.467Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="focal_loss">
<meta name="twitter:description" content="code paper æ‘˜è¦:ç›®å‰ç›®æ ‡æ£€æµ‹ç²¾åº¦æœ€é«˜çš„æ˜¯RCNNå¼•å¯¼çš„ä¸¤é˜¶æ®µçš„æ–¹æ³•ï¼Œç›¸åï¼Œä¸€é˜¶æ®µçš„æ–¹æ³•æ›´å¿«æ›´ç®€å•ï¼Œä½†æ˜¯ç²¾åº¦è½åå¾ˆå¤š.   æˆ‘ä»¬å‘ç°è¿™ç§æ ¹æœ¬åŸå› æ˜¯å› ä¸ºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ­£è´Ÿæ ·æœ¬ä¸å‡è¡¡ã€‚æœ¬æ–‡æå‡ºäº†æ”¹å˜æ ‡å‡†äº¤å‰ç†µæŸå¤±ï¼šé™ä½æ˜“åˆ†æ ·æœ¬çš„æŸå¤±æƒé‡çš„æ–¹æ³•æ¥è§£å†³è¿™ç§ç±»åˆ«ä¸å¹³è¡¡æ–¹æ³•ã€‚ä¸ºäº†æ£€éªŒæ–¹æ³•çš„æœ‰æ•ˆæ€§ï¼Œè¿˜æå‡ºäº†ä¸€ä¸ªRetinaNet,é€Ÿåº¦å¯ä»¥å’Œä¸€é˜¶æ®µçš„æ£€æµ‹å™¨ç›¸åª²ç¾è€Œä¸”æ£€æµ‹ç²¾åº¦ä¹Ÿå¾ˆé«˜ã€‚ å¤„ç†æ ·æœ¬ä¸å‡è¡¡çš„å¸¸ç”¨æ–¹">
<meta name="twitter:image" content="http://yoursite.com/2018/05/01/focal-loss/%5Cimages%5CFocalLoss%5C1.png">





  
  
  <link rel="canonical" href="http://yoursite.com/2018/05/01/focal-loss/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>focal_loss | å‹äººå¸</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">å‹äººå¸</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Navigationsleiste an/ausschalten">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Startseite</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>Ãœber</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>SchlagwÃ¶rter</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Kategorien</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archiv</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/01/focal-loss/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lanfang">
      <meta itemprop="description" content="ä¸ªäººå°ç«™ï¼Œè®ºæ–‡ç¬”è®°åŠ æ‚è®°~~~æ¬¢è¿æ‰“èµ~">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å‹äººå¸">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">focal_loss

              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">VerÃ¶ffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2018-05-01 21:56:15" itemprop="dateCreated datePublished" datetime="2018-05-01T21:56:15+08:00">2018-05-01</time>
            </span>
          

          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Bearbeitet am</span>
                
                <time title="GeÃ¤ndert am: 2019-07-14 15:17:33" itemprop="dateModified" datetime="2019-07-14T15:17:33+08:00">2019-07-14</time>
              </span>
            
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">in</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/paper/" itemprop="url" rel="index"><span itemprop="name">paper</span></a></span>

                
                
                  . 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/paper/object-detection/" itemprop="url" rel="index"><span itemprop="name">object detection</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><a href="https://github.com/facebookresearch/Detectron" target="_blank" rel="noopener">code</a></p>
<p><a href="https://arxiv.org/abs/1708.02002" target="_blank" rel="noopener">paper</a></p>
<h1 id="æ‘˜è¦"><a href="#æ‘˜è¦" class="headerlink" title="æ‘˜è¦:"></a>æ‘˜è¦:</h1><p>ç›®å‰ç›®æ ‡æ£€æµ‹ç²¾åº¦æœ€é«˜çš„æ˜¯RCNNå¼•å¯¼çš„ä¸¤é˜¶æ®µçš„æ–¹æ³•ï¼Œç›¸åï¼Œä¸€é˜¶æ®µçš„æ–¹æ³•æ›´å¿«æ›´ç®€å•ï¼Œä½†æ˜¯ç²¾åº¦è½åå¾ˆå¤š.   <strong>æˆ‘ä»¬å‘ç°è¿™ç§æ ¹æœ¬åŸå› æ˜¯å› ä¸ºåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­æ­£è´Ÿæ ·æœ¬ä¸å‡è¡¡ã€‚æœ¬æ–‡æå‡ºäº†æ”¹å˜æ ‡å‡†äº¤å‰ç†µæŸå¤±ï¼šé™ä½æ˜“åˆ†æ ·æœ¬çš„æŸå¤±æƒé‡çš„æ–¹æ³•æ¥è§£å†³è¿™ç§ç±»åˆ«ä¸å¹³è¡¡æ–¹æ³•ã€‚</strong>ä¸ºäº†æ£€éªŒæ–¹æ³•çš„æœ‰æ•ˆæ€§ï¼Œè¿˜æå‡ºäº†ä¸€ä¸ªRetinaNet,é€Ÿåº¦å¯ä»¥å’Œä¸€é˜¶æ®µçš„æ£€æµ‹å™¨ç›¸åª²ç¾è€Œä¸”æ£€æµ‹ç²¾åº¦ä¹Ÿå¾ˆé«˜ã€‚</p>
<p>å¤„ç†æ ·æœ¬ä¸å‡è¡¡çš„å¸¸ç”¨æ–¹æ³•ï¼š</p>
<ul>
<li><strong>SSD+hard negative mining(OHNM):</strong>åŒ¹é…default boxä¹‹åæ ¹æ®boxçš„confidenceæ’åºå¾—åˆ°æ­£æ ·æœ¬ä¸‰å€æ•°é‡çš„è´Ÿæ ·æœ¬ï¼ˆæ­£è´Ÿæ¯”ä¾‹1:3ï¼‰</li>
<li><strong>Fast RCNN+ONEM:</strong>å¼•å…¥read onlyå±‚å…ˆforwardä¸€éæ ·æœ¬ï¼Œé€‰å–lossæœ€å¤§çš„å‰Nä¸ªé‡æ–°é€å…¥ROIpoolingï¼Œä»…è§£å†³äº†easy exampleçš„é—®é¢˜ã€‚</li>
<li><strong>Class Balanced Loss:</strong>åˆ†åˆ«è®¡ç®—æ­£è´Ÿæ ·æœ¬çš„lossï¼Œå¼•å…¥æƒé‡æ¥å®ç°å¹³è¡¡ï¼Œä¸»è¦è€ƒè™‘ç±»é—´å¹³è¡¡ã€‚</li>
<li><strong>Focal Loss:</strong>æ”¹è¿›çš„CE lossï¼ŒåŠ¨æ€è°ƒæ•´å‚æ•°å‡è¡¡æ­£è´Ÿæ ·æœ¬ä¸å‡è¡¡ã€‚</li>
</ul>
<a id="more"></a>

<p>RetinaNet-101 = ResNet-101-FPN</p>
<h1 id="å¼•è¨€"><a href="#å¼•è¨€" class="headerlink" title="å¼•è¨€"></a>å¼•è¨€</h1><p>â€‹    ä¸¤é˜¶æ®µç›®æ ‡æ£€æµ‹ç®—æ³•ç²¾åº¦ä¸€ç›´åœ¨å„ä¸ªæ¦œå•é¥é¥é¢†å…ˆï¼Œæœ¬æ–‡å°±æ˜¯æå‡ºäº†ä¸€ä¸ªä¸€é˜¶æ®µçš„æ£€æµ‹å™¨ï¼Œå¹¶ä¸”ç²¾åº¦èƒ½å¤Ÿåª²ç¾äºŒé˜¶æ®µç›®æ ‡æ£€æµ‹å™¨ï¼Œæ¯”å¦‚FPN,æˆ–è€…Faster RCNNçš„å˜ä½“Mask RCNN.æœ¬æ–‡è®¤ä¸ºï¼Œå¦¨ç¢ä¸€é˜¶æ®µæ£€æµ‹å™¨è¾¾åˆ°è¾ƒé«˜ç²¾åº¦çš„ä¸»è¦éšœç¢æ˜¯ï¼Œ<strong>ç±»åˆ«ä¸å¹³è¡¡ã€‚</strong></p>
<h2 id="RCNNsä¸­çš„æ­£è´Ÿæ ·æœ¬å‡è¡¡çš„åŸå› "><a href="#RCNNsä¸­çš„æ­£è´Ÿæ ·æœ¬å‡è¡¡çš„åŸå› " class="headerlink" title="RCNNsä¸­çš„æ­£è´Ÿæ ·æœ¬å‡è¡¡çš„åŸå› "></a>RCNNsä¸­çš„æ­£è´Ÿæ ·æœ¬å‡è¡¡çš„åŸå› </h2><p>â€‹    åœ¨RCNNè¿™æ ·çš„æ£€æµ‹å™¨ä¸­ï¼Œç±»åˆ«ä¸å¹³è¡¡é—®é¢˜å·²ç»è¢«ä¸¤é˜¶æ®µçº§è”å’Œé‡‡æ ·çš„å¯å‘å¼æ–¹æ³•è§£å†³äº†ã€‚</p>
<ul>
<li><strong>åŒºåŸŸæè®®é˜¶æ®µ</strong>ï¼ˆselective searchï¼Œedgeboxï¼Œdeepmaskï¼ŒRPNï¼‰é˜¶æ®µå¯ä»¥è¿…é€Ÿé™ä½å€™é€‰ç›®æ ‡åŒºåŸŸçš„æ•°ç›®ï¼ˆ1-2k)ï¼Œè¿‡æ»¤æ‰å¤§éƒ¨åˆ†çš„èƒŒæ™¯sampleã€‚</li>
<li><strong>åˆ†ç±»é˜¶æ®µ</strong>ï¼Œé€šè¿‡å¯å‘å¼é‡‡æ ·æ–¹æ³•ï¼Œæ¯”å¦‚ï¼šåœ¨mini batchä¸­å›ºå®šçš„æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹ï¼ˆ1:3ï¼‰ï¼Œåœ¨çº¿éš¾æ ·æœ¬æŒ–æ˜ï¼ˆOHEMï¼‰ï¼Œæ¥è¾¾åˆ°å‰æ™¯å’ŒèƒŒæ™¯ä¹‹é—´çš„å¹³è¡¡ã€‚</li>
</ul>
<h2 id="one-stageçš„ç±»åˆ«ä¸å‡è¡¡åŸå› "><a href="#one-stageçš„ç±»åˆ«ä¸å‡è¡¡åŸå› " class="headerlink" title="one-stageçš„ç±»åˆ«ä¸å‡è¡¡åŸå› "></a>one-stageçš„ç±»åˆ«ä¸å‡è¡¡åŸå› </h2><ul>
<li>one-stageæ£€æµ‹å™¨éœ€è¦å¤„ç†åœ¨æ•´å¼ å›¾ä¸Šé‡‡æ ·ä¸‹æ¥çš„å¤§é‡å€™é€‰ç›®æ ‡åŒºåŸŸï¼Œå®é™…ä¸­ï¼Œå› ä¸ºéœ€è¦<strong>éå†å„ä¸ªç©ºé—´ä½ç½®ï¼Œå°ºåº¦ï¼Œå’Œçºµæ¨ªæ¯”</strong>ï¼Œè¿™ä¸ªæ•°é‡ä¼šè¾¾åˆ°å¤§çº¦100kã€‚<code>In practice this often amounts to enumerating âˆ¼100k locations that densely cover spatial positions,scales, and aspect ratios</code>. </li>
</ul>
<ul>
<li><p>è™½ç„¶one-stageä¹Ÿç”¨äº†å¯å‘å¼çš„é‡‡æ ·æ–¹æ³•å¦‚ï¼ˆboostrapping)ï¼Œæ¯”å¦‚SSDä¸­ä½¿ç”¨OHEMæ§åˆ¶æ­£è´Ÿæ ·æœ¬æ¯”ä¾‹åœ¨1:3å·¦å³ï¼Œä»ç„¶æ˜¯æ²¡ç”¨ï¼Œå› ä¸º<strong>è®­ç»ƒè¿‡ç¨‹ä»ç„¶è¢«æ˜“åˆ†çš„èƒŒæ™¯æ ·ä¾‹æ‰€ä¸»å¯¼ã€‚</strong><code>While similar sampling heuristics may also be applied, they are inefficient as the training procedure is still dominated by easily classified background examples.</code> </p>
<p>â€‹</p>
</li>
</ul>
<h2 id="æœ¬æ–‡æ–¹æ³•"><a href="#æœ¬æ–‡æ–¹æ³•" class="headerlink" title="æœ¬æ–‡æ–¹æ³•"></a>æœ¬æ–‡æ–¹æ³•</h2><p>â€‹    æœ¬æ–‡æå‡ºäº†ä¸€ç§æ–°çš„æŸå¤±å‡½æ•°æ–¹æ³•ï¼Œèƒ½å¤Ÿ<strong>åŠ¨æ€æ”¾ç¼©äº¤å‰ç†µæŸå¤±</strong>ã€‚å¦‚å›¾1.å½“æ­£ç¡®ç±»åˆ«çš„ç³»æ•°ä¸Šå‡æ—¶ï¼Œè¿™ä¸ªæ”¾ç¼©å› å­å°±ä¼šé™åˆ°0.å¦å¤–è¿™ä¸ªæ”¾ç¼©å› å­èƒ½å¤Ÿè‡ªåŠ¨çš„é™ä½æ˜“åˆ†æ ·æœ¬åœ¨è®­ç»ƒä¸­çš„è´¡çŒ®ï¼Œå¹¶ä¸”è¿…é€Ÿå…³æ³¨é‚£äº›éš¾åˆ†æ ·æœ¬ã€‚</p>
<p><img src="%5Cimages%5CFocalLoss%5C1.png" alt></p>
<p>â€‹    focal-lossçš„å…·ä½“å½¢å¼ä¸é‡è¦ï¼Œåˆ«çš„å½¢å¼ä¹Ÿèƒ½è¾¾åˆ°ç›¸ä¼¼çš„æ•ˆæœã€‚</p>
<p>ğŸ‘€ ä½œè€…ä¹Ÿæ²¡è¯´è‡ªå·±çš„æ–¹æ³•ä¸ºä»€ä¹ˆæ¯”OHEMä¹‹ç±»çš„å¥½ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<h2 id="RetinaNet"><a href="#RetinaNet" class="headerlink" title="RetinaNet"></a>RetinaNet</h2><p>â€‹    <strong>one-stage detector,ç½‘ç»œå†…éƒ¨åŒ…å«ç‰¹å¾é‡‘å­—å¡”å’Œanchorçš„ä½¿ç”¨</strong>ã€‚backboneæ˜¯ResNet101-FPNåœ¨COCOæµ‹è¯•é›†è¾¾åˆ°äº†39.1çš„APå¹¶ä¸”é€Ÿåº¦æ¯ç§’5å¸§ï¼Œè¶…è¿‡äº†æ‰€æœ‰ä¸€é˜¶æ®µã€äºŒé˜¶æ®µçš„å•æ¨¡å‹æ£€æµ‹å™¨ã€‚å¦‚å›¾2.</p>
<p><img src="%5Cimages%5CFocalLoss%5C2.png" alt></p>
<h1 id="Related-work"><a href="#Related-work" class="headerlink" title="Related work"></a>Related work</h1><h2 id="Class-Imbalance"><a href="#Class-Imbalance" class="headerlink" title="Class Imbalance"></a>Class Imbalance</h2><p>â€‹    æ‰€æœ‰ä¸€é˜¶æ®µæ£€æµ‹å™¨ï¼ŒåŒ…æ‹¬å¢å¼ºdetectorï¼ˆboosted detector)ï¼ŒDPMæˆ–è€…SSDéƒ½é¢ä¸´ä¸¥é‡çš„ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜ã€‚<strong>æ¯å¼ å›¾éœ€è¦å¤„ç†$10^4-10^5$å€™é€‰åŒºåŸŸè€Œåªæœ‰å°‘æ•°æ˜¯çœŸæ­£åŒ…å«ç›®æ ‡çš„ã€‚</strong>è¿™å¯¼è‡´äº†ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ol>
<li>è®­ç»ƒæ²¡æœ‰æ•ˆç‡ï¼šå¤§éƒ¨åˆ†ä½ç½®éƒ½æ˜¯è´Ÿæ ·æœ¬ï¼Œå¯¼è‡´æ— æ•ˆçš„å­¦ä¹ ã€‚</li>
<li>è´Ÿæ ·æœ¬ä¼šå‹å€’è®­ç»ƒï¼Œå¯¼è‡´äº§ç”Ÿä¸äº†æ¨¡å‹ã€‚</li>
</ol>
<p>å¸¸è§çš„æ–¹æ³•å°±æ˜¯ï¼š</p>
<ol>
<li>æŒ‰ç…§classæ¯”ä¾‹åŠ æƒé‡ï¼šæœ€å¸¸å¤„ç†ç±»åˆ«ä¸å¹³è¡¡é—®é¢˜çš„æ–¹å¼</li>
<li>OHEM:åªä¿ç•™lossé«˜çš„é‚£äº›æ ·æœ¬ï¼Œå®Œå…¨å¿½ç•¥æ‰ç®€å•æ ·æœ¬</li>
<li>éš¾æ ·æœ¬æŒ–æ˜+æŒ‰classæ¯”ä¾‹sampleï¼šåœ¨å‰è€…åŸºç¡€ä¸Šï¼Œåœ¨ä¿è¯æ­£è´Ÿæ ·æœ¬3ï¼š1</li>
</ol>
<p>æˆ‘ä»¬çš„æ–¹æ³•å°±æ˜¯èƒ½å¤Ÿè‡ªåŠ¨å¤„ç†è¿™ç§ä¸å‡è¡¡ï¼Œ<strong>å…è®¸æˆ‘ä»¬åœ¨æ‰€æœ‰æ ·æœ¬ä¸Šè®­ç»ƒ</strong>ï¼Œå¹¶ä¸”è¿‡ç¨‹ä¸­æ²¡æœ‰å‹å€’æ€§çš„è´Ÿæ ·æœ¬æŸå¤±å’Œæ¢¯åº¦ã€‚</p>
<h2 id="Robust-Estimation"><a href="#Robust-Estimation" class="headerlink" title="Robust Estimation"></a>Robust Estimation</h2><p>robust loss:å‡å°‘äº†å¼‚å¸¸ç‚¹outlierçš„è´¡çŒ®ï¼Œé€šè¿‡é™ä½hard exampleçš„æŸå¤±æƒé‡ã€‚</p>
<p>focal lossï¼šé™ä½äº†inliers(easy example)çš„æƒé‡ï¼Œå› æ­¤ä»–ä»¬å¯¹æ•´ä½“æŸå¤±çš„è´¡çŒ®å°±é™ä½äº†å³ä½¿ä»–ä»¬çš„æ•°ç›®å¾ˆå¤šã€‚</p>
<h1 id="Focal-loss"><a href="#Focal-loss" class="headerlink" title="Focal loss"></a>Focal loss</h1><p>æ­£è´Ÿæ ·æœ¬ä¸å‡è¡¡ï¼Œæ¯”å¦‚1:1000.</p>
<p>äºŒå…ƒåˆ†ç±»çš„äº¤å‰ç†µï¼š<br>$$<br>CE(p,y)=\begin{cases}-log(p)\qquad if \quad y=1 \ -log(1-p)\qquad otherwise\end{cases}\qquad(1)<br>$$<br>ä»¥ä¸Šå¼å­ä¸­ï¼Œ$y\in{\pm1}$è¡¨ç¤ºground truthçš„æ ‡ç­¾ã€‚$p\in[0,1]$æ˜¯æ¨¡å‹ä¼°è®¡$y=1$çš„ç±»åˆ«æ¦‚ç‡ã€‚å®šä¹‰$p_t$å¦‚ä¸‹ï¼š<br>$$<br>p_t=\begin{cases}p\qquad if\quad y=1\1-p\qquad otherwise\qquad(2)\end{cases}<br>$$</p>
<p>$$<br>CE(p,y)=CE(p_t)=-log(p_t)<br>$$</p>
<p>å°±æ˜¯å›¾1ä¸Šé¢çš„é‚£ä¸ªè“è‰²çš„çº¿ã€‚å³ä½¿:</p>
<p>â€‹                        <strong>æ˜“åˆ†æ ·æœ¬ï¼ˆ$p_t&gt;&gt;0.5)$</strong></p>
<p>ä¹Ÿä¼šæœ‰å¾ˆå¤§çš„æŸå¤±ã€‚å½“å¤§é‡æ˜“åˆ†æ ·æœ¬å åŠ æ—¶ï¼Œè¿™äº›æŸå¤±ä¼šæœ€ç»ˆå‹å€’é‚£äº›ç¨€å°‘çš„æ ·æœ¬ã€‚</p>
<h2 id="å¹³è¡¡äº¤å‰ç†µ"><a href="#å¹³è¡¡äº¤å‰ç†µ" class="headerlink" title="å¹³è¡¡äº¤å‰ç†µ"></a>å¹³è¡¡äº¤å‰ç†µ</h2><p>â€‹    å¼•å…¥ä¸€ä¸ªæƒé‡å› å­$\alpha\in[0,1]$ç»™ç±»åˆ«1ï¼Œ$1-\alpha$ç»™ç±»åˆ«-1.å®é™…æ“ä½œä¸­ï¼Œ$\alpha$é€šå¸¸æ˜¯è®¾ç½®æˆç±»åˆ«é¢‘æ•°çš„å€’æ•°ï¼Œæˆ–è€…ç”±äº¤å‰éªŒè¯æ¥è®¾ç½®ã€‚</p>
<p>$\alpha$å¹³è¡¡çš„CElosså®šä¹‰å¦‚ä¸‹ï¼š<br>$$<br>CE(p_t)=-\alpha_tlog(p_t)\qquad(3)<br>$$</p>
<h2 id="Focal-Loss-Definition"><a href="#Focal-Loss-Definition" class="headerlink" title="Focal Loss Definition"></a>Focal Loss Definition</h2><p>æ˜“åˆ†çš„è´Ÿæ ·æœ¬åŒ…å«äº†æŸå¤±çš„ç»å¤§éƒ¨åˆ†ï¼Œä¸»å¯¼äº†æ¢¯åº¦ã€‚è™½ç„¶$\alpha$å¹³è¡¡äº†æ­£è´Ÿæ ·æœ¬çš„é‡è¦æ€§ï¼Œä½†æ˜¯ä»–æ²¡èƒ½åŒºåˆ†ç®€å•æ ·æœ¬å’Œéš¾æ ·æœ¬äº†ã€‚</p>
<p><code>Easily classified negatives comprise the majority of the loss and dominate the gradient.</code><br><code>While Î± balances the importance of positive/negative examples, it does not differentiate between easy/hard examples.</code></p>
<p>æˆ‘ä»¬æå‡ºçš„æ–¹æ³•èƒ½å¤Ÿé‡æ„è¿™ä¸ªæŸå¤±ï¼Œé™ä½æ˜“åˆ†æ ·æœ¬çš„æƒé‡ï¼Œä¸“æ³¨äºéš¾åˆ†è´Ÿæ ·æœ¬çš„è®­ç»ƒã€‚<code>Instead,we propose to reshape the loss function to down-weight easy examples and thus focus training on hard negatives.</code> </p>
<p>å¼•å…¥è°ƒåˆ¶å› å­$(1-p_t)^{\gamma}$å¯è°ƒçš„<em>focusing</em> å‚æ•°$\gamma\ge0$.<br>$$<br>\textbf{FL}(p_t)=-(1-p_t)^{\gamma}log(p_t)<br>$$<br>åœ¨å›¾1ä¸­$\gamma\in[0,5]$ å¯è§†åŒ–ã€‚</p>
<p>focal lossæœ‰ä¸¤ä¸ªå±æ€§ï¼š</p>
<ol>
<li>$p_t$å¾ˆå°ï¼ˆéš¾æ ·æœ¬ï¼‰æ—¶ï¼Œè°ƒåˆ¶å› å­æ¥è¿‘1ï¼Œlossæ²¡æœ‰å½±å“ã€‚å½“$p_t-&gt;1$ï¼ˆæ˜“åˆ†æ ·æœ¬ï¼‰,å› å­æ¥è¿‘0ï¼Œlosså°±ä¼šæ¯”é‡é™ä½ã€‚</li>
<li>$\gamma$èƒ½å¤Ÿå¹³æ»‘çš„è°ƒæ•´æ˜“åˆ†æ ·æœ¬æƒé‡ä¸‹é™çš„é€Ÿåº¦ã€‚å½“$\gamma$ä¸º0ï¼Œ$\textbf{FL}$ç­‰åŒäº$\textbf{CE}$ ã€‚å½“$\gamma$ä¸Šå‡ï¼Œè°ƒåˆ¶å› å­çš„ä½œç”¨ä¹Ÿä¼šä¸Šå‡ã€‚ï¼ˆ$\gamma=2$æ—¶å€™æ•ˆæœæœ€å¥½ï¼‰ã€‚</li>
</ol>
<p>ä¸¾ä¾‹ï¼šå½“$\gamma=2$æ—¶ï¼Œ$p_t=0.9$çš„æ ·æœ¬çš„æŸå¤±å’Œäº¤å‰ç†µçš„æŸå¤±æ¯”ä¼šä¸‹é™100å€ï¼Œ$p_t=0.968$æ ·æœ¬çš„æŸå¤±ä¼šä¸‹é™1000å€ã€‚åè¿‡æ¥å°±ä¼šæå‡é”™åˆ†æ ·æœ¬çš„é‡è¦æ€§ï¼Œå¯¹äº$p_t\le0.5,\gamma=2$çš„æƒ…å†µï¼Œå…¶lossä¼šç¼©æ”¾åˆ°4å€ã€‚</p>
<p>å®é™…æ“ä½œä¸­çš„focal losså½¢å¼ï¼š<br>$$<br>\textbf{FL}(p_t)=-\alpha_t(1-p_t)^{\gamma}log(p_t)\qquad(5)<br>$$<br>æœ‰äº†$\alpha$æ•ˆæœä¼šå¥½äº›ï¼Œsigmodè®¡ç®—$p$æ•ˆæœä¹Ÿä¼šæ›´ç¨³å®šäº›ã€‚</p>
<h2 id="Class-Imbalance-and-Model-Initialization"><a href="#Class-Imbalance-and-Model-Initialization" class="headerlink" title="Class Imbalance and Model Initialization"></a>Class Imbalance and Model Initialization</h2><p>è®­ç»ƒæ—¶ï¼Œæ•°é‡å¾ˆå¤šçš„ç±»åˆ«(background)ä¼šèµ·ä¸»å¯¼ä½œç”¨ï¼Œå¯¼è‡´ä¸ç¨³å®šã€‚ä¸ºäº†æ—©æœŸè®­ç»ƒçš„ç¨³å®šæ€§ï¼Œä½œè€…è®¾ç½®äº†ç¨€å°‘ç±»åˆ«(foreground)çš„å€¼$\pi$ è¿™æ ·æ¨¡å‹ä¼°è®¡å‰æ™¯çš„æ¦‚ç‡å°±æ¯”è¾ƒå°ï¼Œæ¯”å¦‚0.01.</p>
<h2 id="Class-Imbalance-and-Two-stage-Detectors"><a href="#Class-Imbalance-and-Two-stage-Detectors" class="headerlink" title="Class Imbalance and Two-stage Detectors"></a>Class Imbalance and Two-stage Detectors</h2><p>ä¹‹å‰è®²è¿‡RCNNsè¿™æ ·çš„ä¸¤é˜¶æ®µæ£€æµ‹å™¨é€šè¿‡<strong>(1)ä¸¤çº§çº§è”(2)æœ‰åå¥½çš„é‡‡æ ·</strong> è§£å†³äº†æ ·æœ¬ä¸å¹³è¡¡çš„é—®é¢˜ã€‚è€Œæˆ‘ä»¬çš„æ–¹æ³•ç›´æ¥é€šè¿‡æŸå¤±å‡½æ•°æ¥è§£å†³ã€‚</p>
<h1 id="RetinaNet-Detector"><a href="#RetinaNet-Detector" class="headerlink" title="RetinaNet Detector"></a>RetinaNet Detector</h1><p>ç”±ä¸€ä¸ªbackboneå’Œä¸¤ä¸ªç‰¹å®šä»»åŠ¡çš„å­ç½‘ç»œç»„æˆã€‚backboneæ˜¯è´Ÿè´£è®¡ç®—è¾“å…¥å›¾ç‰‡çš„ç‰¹å¾ã€‚ç¬¬ä¸€ä¸ªè‡ªç½‘ç»œè¿›è¡Œç›®æ ‡åˆ†ç±»ï¼Œç¬¬äºŒä¸ªè¿›è¡Œbbox å›å½’ã€‚</p>
<p><img src="%5Cimages%5CFocalLoss%5C3.png" alt></p>
<h2 id="FPN"><a href="#FPN" class="headerlink" title="FPN"></a>FPN</h2><p><strong>FPNå¢åŠ äº†ä¸€ä¸ªè‡ªä¸Šè€Œä¸‹çš„æ—è·¯ï¼Œå’Œæ¨ªå‘è¿æ¥ï¼Œå› æ­¤ç½‘ç»œå¯ä»¥åœ¨å•ä¸€åˆ†è¾¨ç‡çš„è¾“å…¥å›¾åƒä¸Šæ„å»ºä¸°å¯Œçš„ï¼Œå¤šå°ºåº¦çš„ç‰¹å¾é‡‘å­—å¡”ã€‚</strong></p>
<blockquote>
<p>In brief, FPN augments a standard convolutional network with <strong>a top-down pathway</strong> and <strong>lateral connections</strong> so the network efficiently constructs <strong>a rich, multi-scale feature pyramid</strong> from <strong>a single resolution input image</strong>.</p>
</blockquote>
<p>å¦‚å›¾b.æ¯å±‚éƒ½èƒ½æ£€æµ‹ä¸€ä¸ªå°ºåº¦ï¼Œåœ¨RPN,Faster RCNN,Mask RCNNä¸Šéƒ½æé«˜äº†ç²¾åº¦ã€‚</p>
<p>åœ¨ResNetä¸Šæ„å»ºFPN,ä»ç¬¬3å±‚åˆ°ç¬¬7å±‚.ï¼ˆ$P_l$æ¯”è¾“å…¥åˆ†è¾¨ç‡é™ä½äº†$2^l$ï¼‰ã€‚åœ¨FPNè®ºæ–‡ç¦»æ‰€æœ‰é‡‘å­—å¡”å±‚çš„é€šé“éƒ½æ˜¯256.</p>
<p><img src="%5Cimages%5CFocalLoss%5C%E5%9B%BE%E7%89%871.jpg" alt></p>
<p><code>RetinaNet uses feature pyramid levels P3 to P7, where P3 to P5 are computed from the output of the corresponding ResNet residual stage (C3 through C5) using top-down and lateral connections just as in [20], P6 is obtained via a 3Ã—3 stride-2 conv on C5, and P7 is computed by applying ReLU followed by a 3Ã—3  tride-2 conv on P6. This differs slightly from [20]: (1) we donâ€™t use the high-resolution pyramid level P2 for computational reasons, (2) P6 is computed by strided convolution instead of downsampling, and (3) we include P7 to improve large object detection. These minor modifications improve speed while  maintaining accuracy .</code></p>
<p>ç»†èŠ‚å¦‚ä¸Šï¼Œæ‡’å¾—ç¿»è¯‘äº†ã€‚ã€‚ã€‚</p>
<h2 id="Anchors"><a href="#Anchors" class="headerlink" title="Anchors"></a>Anchors</h2><p>â€‹      å–ResNetçš„$C_3,C_4,C_5$å±‚ï¼Œæ„å»ºé‡‘å­—å¡”  $P_3-P_7$ï¼Œæ¯å±‚å¯¹åº”çš„anchoré¢ç§¯åˆ†åˆ«ä¸º$32^2,64^2,128^2,256^2,512^2$.aspect ratioï¼š${1:2,1:1,2:1}$ ï¼Œanchorçš„å°ºåº¦ï¼š${2^0,2^{1/3},2^{2/3}}$.æœ€åæ¯å±‚æœ‰$A=9$ä¸ªanchorï¼Œèƒ½å¤Ÿè¦†ç›–$32-813$åƒç´ ã€‚ï¼ˆ$32\times2^0=32,512\times2^{2/3}=813$).</p>
<p>â€‹    æ¯ä¸ªanchoræœ‰ï¼š</p>
<ul>
<li>ä¸€ä¸ªé•¿åº¦ä¸º$K$çš„one-hotå‘é‡ï¼Œè´Ÿè´£åˆ†ç±»ï¼Œ$K$è¡¨ç¤ºç›®æ ‡ç§ç±»</li>
<li>ä¸€ä¸ª4ç»´çš„å‘é‡ç”¨æ¥å›å½’ã€‚</li>
</ul>
<p>åˆ†é…ç»†èŠ‚ï¼š<code>Specifically,anchors are assigned to ground-truth object boxes using an intersection-over-union (IoU) threshold of 0.5; and to background if their IoU is in [0, 0.4). As each anchor is assigned to at most one object box, we set the corresponding entry in its length K label vector to 1 and all other entries to 0. If an anchor is unassigned, which may happen with overlap in [0.4, 0.5), it is ignored during training.</code>  </p>
<h2 id="Classifination-Subnet"><a href="#Classifination-Subnet" class="headerlink" title="Classifination Subnet:"></a>Classifination Subnet:</h2><h2 id="Box-Regression-Subnet"><a href="#Box-Regression-Subnet" class="headerlink" title="Box Regression Subnet:"></a>Box Regression Subnet:</h2><p>ä¸¤ä¸ªå­ç½‘ç»œè™½ç„¶æ¡†æ¶ä¸€æ ·ï¼Œä½†æ˜¯å‚æ•°ç‹¬ç«‹ã€‚</p>
<h1 id="Inference-and-Training"><a href="#Inference-and-Training" class="headerlink" title="Inference and Training"></a>Inference and Training</h1><h2 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h2><ul>
<li>ResNet-50å’ŒResNet-101éƒ½æ˜¯åœ¨ImageNet1kä¸Šé¢çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚</li>
<li>FPNåˆå§‹åŒ–ä½¿ç”¨çš„åŸæ–‡ä¸­åˆå§‹åŒ–çš„æ–¹æ³•ã€‚æ‰€æœ‰çš„å·ç§¯å±‚ï¼ˆé™¤äº†æœ€åçš„å­ç½‘ç»œï¼‰éƒ½æ˜¯åˆå§‹åŒ–ä¸º$b=0,é«˜æ–¯æƒé‡\theta=0.01$ã€‚</li>
<li>å­ç½‘ç»œçš„åˆ†ç±»å±‚å°†biasåˆå§‹åŒ–ä¸ºï¼š$b=-log((1-\pi)/\pi)$,è®ºæ–‡ä½¿ç”¨$\pi=0.01$ï¼Œ<strong>è¡¨ç¤ºæ¯ä¸ªanchorè¢«æ ‡è®°ä¸ºå‰æ™¯çš„æ¦‚ç‡(confidence)ä¸º0.01.</strong></li>
</ul>
<p><strong>å…³äºbiasçš„è®¾ç½®é—®é¢˜ï¼š</strong></p>
<p><img src="%5Cimages%5CFocalLoss%5Cfocal_loss7.jpg" alt></p>
<p><strong>åŸå› ï¼š</strong> </p>
<p>ä¸ºäº†å°†è®­ç»ƒåˆå§‹é˜¶æ®µçš„anchoræ¦‚ç‡è®¾ä¸º0.01ï¼Œå³å½“åšå‰æ™¯çš„æ¦‚ç‡ä¸º0.01ï¼Œ<strong>å³ä¸ºæ–‡ç« ä¸­å®šä¹‰çš„éš¾æ ·æœ¬ï¼Œè¿™æ ·å¯ä»¥ä¿è¯åœ¨è®­ç»ƒå¼€å§‹æ—¶ï¼Œæ•°ç›®ç¨€å°‘çš„å‰æ™¯anchorèƒ½å¤Ÿäº§ç”Ÿè¾ƒå¤§çš„focal lossï¼Œé˜²æ­¢æ•°ç›®è¾ƒå¤šçš„èƒŒæ™¯anchoråœ¨ç¬¬ä¸€æ¬¡è¿­ä»£çš„æ—¶å€™å°±äº§ç”Ÿoverwhelmingçš„ä¸ç¨³å®šæŸå¤±ã€‚</strong></p>
<p><code>This initialization prevents the large number of background anchors from generating a large, destabilizing loss value in the first iteration of training.</code></p>
<p>æ•ˆæœå¦‚ä¸‹ï¼š<img src="%5Cimages%5CFocalLoss%5C4.png" alt></p>
<h2 id="ä¼˜åŒ–æ–¹æ³•"><a href="#ä¼˜åŒ–æ–¹æ³•" class="headerlink" title="ä¼˜åŒ–æ–¹æ³•"></a>ä¼˜åŒ–æ–¹æ³•</h2><p>$$<br>Loss=sum(focal loss)+L_1Smooth<br>$$</p>
<p>åªæœ‰åˆ†ç±»å±‚ä½¿ç”¨focallossã€‚</p>
<h2 id="OHEM-VS-FL"><a href="#OHEM-VS-FL" class="headerlink" title="OHEM VS FL"></a>OHEM VS FL</h2><p>OHEM:æ¯ä¸ªæ ·æœ¬éƒ½å¯¹lossè¿›è¡Œæ’åºï¼Œå†è¿›è¡Œéæå¤§å€¼æŠ‘åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´mini-batché‡Œé¢éƒ½æ˜¯lossæœ€é«˜çš„æ ·æœ¬ã€‚å’Œfocal lossç±»ä¼¼ï¼ŒOHEMæ›´åŠ å…³æ³¨é”™åˆ†æ ·æœ¬ï¼Œä½†æ˜¯ä»–å®Œå…¨æŠ›å¼ƒäº†æ˜“åˆ†æ ·æœ¬ã€‚æ•ˆæœå¯¹æ¯”å¦‚ä¸Šå›¾d</p>
<p><code>Like the focal loss,OHEM puts more emphasis on misclassified examples, but unlike FL, OHEM completely discards easy examples.</code> </p>
<h2 id="Single-model-Objecto-Detector-vs-RetinaNet"><a href="#Single-model-Objecto-Detector-vs-RetinaNet" class="headerlink" title="Single-model Objecto Detector vs RetinaNet"></a>Single-model Objecto Detector vs RetinaNet</h2><p><img src="%5Cimages%5CFocalLoss%5C5.png" alt></p>

      
    </div>

    

    
      
    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/ObjectDetection/" rel="tag"># ObjectDetection</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/05/01/YOLOv2/" rel="next" title="YOLOv2">
                <i class="fa fa-chevron-left"></i> YOLOv2
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/05/06/YOLOv3/" rel="prev" title="YOLOv3">
                YOLOv3 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Inhaltsverzeichnis
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Ãœbersicht
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">lanfang</p>
              <div class="site-description motion-element" itemprop="description">ä¸ªäººå°ç«™ï¼Œè®ºæ–‡ç¬”è®°åŠ æ‚è®°~~~æ¬¢è¿æ‰“èµ~</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">34</span>
                    <span class="site-state-item-name">Artikel</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">19</span>
                    <span class="site-state-item-name">Kategorien</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">10</span>
                    <span class="site-state-item-name">schlagwÃ¶rter</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/galaxy-fangfang" title="GitHub &rarr; https://github.com/galaxy-fangfang" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.kaggle.com/konglanfang" title="Kaggle &rarr; https://www.kaggle.com/konglanfang" rel="noopener" target="_blank"><i class="fa fa-fw fa-kaggle"></i>Kaggle</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://weibo.com/u/2977394557?refer_flag=1001030101_" title="å¾®åš &rarr; https://weibo.com/u/2977394557?refer_flag=1001030101_" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>å¾®åš</a>
                </span>
              
            </div>
          

          

          
          

          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#æ‘˜è¦"><span class="nav-number">1.</span> <span class="nav-text">æ‘˜è¦:</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å¼•è¨€"><span class="nav-number">2.</span> <span class="nav-text">å¼•è¨€</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#RCNNsä¸­çš„æ­£è´Ÿæ ·æœ¬å‡è¡¡çš„åŸå› "><span class="nav-number">2.1.</span> <span class="nav-text">RCNNsä¸­çš„æ­£è´Ÿæ ·æœ¬å‡è¡¡çš„åŸå› </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#one-stageçš„ç±»åˆ«ä¸å‡è¡¡åŸå› "><span class="nav-number">2.2.</span> <span class="nav-text">one-stageçš„ç±»åˆ«ä¸å‡è¡¡åŸå› </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æœ¬æ–‡æ–¹æ³•"><span class="nav-number">2.3.</span> <span class="nav-text">æœ¬æ–‡æ–¹æ³•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RetinaNet"><span class="nav-number">2.4.</span> <span class="nav-text">RetinaNet</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Related-work"><span class="nav-number">3.</span> <span class="nav-text">Related work</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Class-Imbalance"><span class="nav-number">3.1.</span> <span class="nav-text">Class Imbalance</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Robust-Estimation"><span class="nav-number">3.2.</span> <span class="nav-text">Robust Estimation</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Focal-loss"><span class="nav-number">4.</span> <span class="nav-text">Focal loss</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å¹³è¡¡äº¤å‰ç†µ"><span class="nav-number">4.1.</span> <span class="nav-text">å¹³è¡¡äº¤å‰ç†µ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Focal-Loss-Definition"><span class="nav-number">4.2.</span> <span class="nav-text">Focal Loss Definition</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Class-Imbalance-and-Model-Initialization"><span class="nav-number">4.3.</span> <span class="nav-text">Class Imbalance and Model Initialization</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Class-Imbalance-and-Two-stage-Detectors"><span class="nav-number">4.4.</span> <span class="nav-text">Class Imbalance and Two-stage Detectors</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#RetinaNet-Detector"><span class="nav-number">5.</span> <span class="nav-text">RetinaNet Detector</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#FPN"><span class="nav-number">5.1.</span> <span class="nav-text">FPN</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Anchors"><span class="nav-number">5.2.</span> <span class="nav-text">Anchors</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Classifination-Subnet"><span class="nav-number">5.3.</span> <span class="nav-text">Classifination Subnet:</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Box-Regression-Subnet"><span class="nav-number">5.4.</span> <span class="nav-text">Box Regression Subnet:</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Inference-and-Training"><span class="nav-number">6.</span> <span class="nav-text">Inference and Training</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆå§‹åŒ–"><span class="nav-number">6.1.</span> <span class="nav-text">åˆå§‹åŒ–</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¼˜åŒ–æ–¹æ³•"><span class="nav-number">6.2.</span> <span class="nav-text">ä¼˜åŒ–æ–¹æ³•</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OHEM-VS-FL"><span class="nav-number">6.3.</span> <span class="nav-text">OHEM VS FL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Single-model-Objecto-Detector-vs-RetinaNet"><span class="nav-number">6.4.</span> <span class="nav-text">Single-model Objecto Detector vs RetinaNet</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lanfang</span>

  

  
</div>


  <div class="powered-by">Erstellt mit  <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.9.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Design â€“ <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.2.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  
  













  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>




  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/affix.js?v=7.2.0"></script>

  <script src="/js/schemes/pisces.js?v=7.2.0"></script>



  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  <script src="/js/next-boot.js?v=7.2.0"></script>

  

  

  

  

  


  


  




  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      document.getElementById(all[i].inputID + '-Frame').parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  

  

  

  

  

  

  

  

  

  


  

</body>
</html>
